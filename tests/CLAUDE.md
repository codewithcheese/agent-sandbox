Read @docs/dev/testing.md

## Fixing tests

- If a test is failing, first check if the behaviour being tested is correct.
- Do not change a test to conform with missing or incorrect behavior, propose a fix instead.


## Typescript

- Use `invariant` to narrow types 
