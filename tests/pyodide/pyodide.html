<!doctype html>
<html>
  <head>
    <title>Pyodide Test</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.27.4/full/pyodide.js"></script>
  </head>
  <body>
    <h1>Pyodide Test</h1>
    <div id="output"></div>
    
    <script type="text/javascript">
      async function main() {
        try {
          // Display loading message
          document.getElementById('output').innerHTML = 'Loading Pyodide...';
          
          // Load Pyodide
          let pyodide = await loadPyodide();
          
          // Run some basic Python code
          const result1 = pyodide.runPython("1 + 2");
          
          // Run more complex Python code
          const result2 = pyodide.runPython(`
            def fibonacci(n):
                a, b = 0, 1
                for _ in range(n):
                    a, b = b, a + b
                return a
            
            [fibonacci(i) for i in range(10)]
          `);
          
          // Display the results
          document.getElementById('output').innerHTML = `
            <p>Basic calculation (1 + 2): ${result1}</p>
            <p>Fibonacci sequence: ${JSON.stringify(result2.toJs())}</p>
          `;
        } catch (error) {
          document.getElementById('output').innerHTML = `Error: ${error.message}`;
          console.error(error);
        }
      }
      
      // Run the main function when the page loads
      window.onload = main;
    </script>
  </body>
</html>
